angular.module('angularApp')
.controller('ButtonsCtrl', [ '$scope', function($scope) {
      $scope.radioModel = 'Middle';

      $scope.checkModel = {
        left: false,
        middle: true,
        right: false
      };

      $scope.checkResults = [];

      $scope.$watchCollection('checkModel', function () {
        $scope.checkResults = [];
        angular.forEach($scope.checkModel, function (value, key) {
            console.log("value changed");          
            if (value) {

            $scope.checkResults.push(key);
          }
        });
      });

    var callback = {
        id: 'map.service.js',
        notify: function(value, operation) {
            var x = parseInt(value.x)/1000000;
            var y = parseInt(value.y)/1000000;
            $scope.delayPoints.push(new L.LatLng(y, x, value.delay));
            if($scope.delayPoints.length > 500) {
                console.log("shift");
                $scope.delayPoints.shift();
            }            
            heat.redraw();
        }   
    }
    //MapModel.registerOberserver(callback);
}]);
